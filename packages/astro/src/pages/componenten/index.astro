---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import { Link, BreadcrumbNav, BreadcrumbNavLink, BreadcrumbNavSeparator } from '@utrecht/component-library-react';
import { base } from 'astro:config/client';
import TileList from '@components/TileList.astro';
import TileNavigation from '@components/TileNavigation.astro';
import ComponentCard from '@components/ComponentCard.astro';

const components = await getCollection('components');

// Sort components alphabetically by title
const sortedComponents = components.sort((a, b) =>
  a.data.title.localeCompare(b.data.title)
);
---

<Layout>
  <article class="componenten-page">
    <BreadcrumbNav>
      <BreadcrumbNavLink href={`${base}/`} index={0}>Home</BreadcrumbNavLink>
      <BreadcrumbNavSeparator><utrecht-icon-chevron-right /></BreadcrumbNavSeparator>
      <BreadcrumbNavLink href={`${base}/componenten`} current index={1}>Componenten</BreadcrumbNavLink>
    </BreadcrumbNav>

    <h1>Componenten en iconen</h1>
  <p>
    Ontwikkelaars kunnen voor uitgebreide documentatie naar de <Link href="https://nl-design-system.github.io/utrecht/storybook/?path=/docs/utrecht-readme--docs">Storybook</Link> of de broncode in <Link href="https://github.com/nl-design-system/utrecht">Github</Link>.
  </p>

  <h2>Meer weten</h2>
  <TileList>
    <TileNavigation
      href={`${base}/componenten/iconen`}
      title="Iconen"
      description="Meer weten over de iconen in het Utrecht Design System?"
    />
    <TileNavigation
      href="https://nl-design-system.github.io/utrecht/storybook/?path=/docs/utrecht-readme--docs"
      title="Storybook"
      description="Bekijk alle componenten in de Storybook."
    />
  </TileList>

  <h2>Componenten overzicht</h2>
  <div class="component-grid">
    {sortedComponents.map((component) => (
      <ComponentCard
        href={`${base}/componenten/${component.id.replace(/\.mdx?$/, '')}`}
        title={component.data.title}
        frameworks={component.data.frameworks}
        previewImage={component.data.previewImage}
      >
        {component.data.description && (
          <p>{component.data.description}</p>
        )}
      </ComponentCard>
    ))}
  </div>
  </article>
</Layout>

<style is:global>
  .componenten-page {
    padding-block-start: 2rem;
  }

  .component-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  @media (max-width: 900px) {
    .component-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 600px) {
    .component-grid {
      grid-template-columns: 1fr;
    }
  }
</style is:global>
