---
import { base } from 'astro:config/client';
import { joinUrl } from '../utils/url';

interface Props {
  href: string;
  title: string;
  frameworks: string[];
  previewImage?: string;
}

const { href, title, frameworks, previewImage } = Astro.props;

const fullPreviewImage = previewImage
  ? (previewImage.startsWith('/') ? joinUrl(base, previewImage) : previewImage)
  : undefined;
---

<div class="utrecht-component-card">
  {fullPreviewImage && (
    <div class="utrecht-component-card__preview">
      <img src={fullPreviewImage} alt="" class="utrecht-component-card__preview-image" />
    </div>
  )}
  <a class="utrecht-link utrecht-component-card__link" href={href}>
    <h3 class="nl-heading nl-heading--level-3">{title}</h3>
  </a>
  <div class="utrecht-component-card__badges">
    {frameworks.map((framework) => (
      <div class="utrecht-data-badge">{framework}</div>
    ))}
  </div>
  <slot />
</div>

<style>
  .utrecht-component-card {
    --utrecht-link-text-decoration: none;
    --nl-heading-level-3-margin-block-start: 0;
    --nl-heading-level-3-margin-block-end: 0;

    border: 1px solid #ccc;
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding-block-start: 24px;
    padding-block-end: 24px;
    padding-inline-start: 16px;
    padding-inline-end: 16px;
  }

  .utrecht-component-card__preview {
    margin-block-end: 8px;
    border-radius: 4px;
    overflow: hidden;
    background-color: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
  }

  .utrecht-component-card__preview-image {
    display: block;
    max-width: 100%;
    max-height: 80px;
    height: auto;
    object-fit: contain;
  }

  .utrecht-component-card__link {
    display: block;
  }

  .utrecht-component-card__badges {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .utrecht-data-badge {
    background-color: #f0f0f0;
    border-radius: 4px;
    color: #333;
    font-size: 12px;
    font-weight: 500;
    padding: 4px 8px;
  }
</style>

