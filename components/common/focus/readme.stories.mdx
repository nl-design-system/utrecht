import { Canvas, Markdown, Meta, Story } from "@storybook/blocks";
import clsx from "clsx";
import readme from "./README.md";
import tokensDefinition from "./tokens.json";
import { ComponentTokensSection } from "../../../documentation/components/ComponentTokensSection";
import tokens from "../../../proprietary/design-tokens/dist/index.json";

export const bem = (block, modifiers, classNames) =>
  clsx(
    block,
    classNames,
    modifiers &&
      Object.fromEntries(
        Object.entries(modifiers)
          .filter(([key]) => key)
          .map(([key, value]) => [`${block}--${key}`, value])
      )
  );

export const FocusHTMLExample = () => (
  <div className={clsx("utrecht-html")}>
    <div>
      <a href="https://example.com" target="_new">
        example.com
      </a>
    </div>
    <div>
      <input type="text" />
    </div>
    <div>
      <input type="checkbox" />
    </div>
    <div>
      <input type="radio" />
    </div>
    <div>
      <select>
        <option>Example</option>
      </select>
    </div>
    <div>
      <textarea></textarea>
    </div>
    <div>
      <button type="button">Click me</button>
    </div>
  </div>
);

export const FocusBEMExample = ({ modifiers: { focus, focusVisible } }) => (
  <div>
    <div>
      <a
        href="https://example.com"
        target="_new"
        className={clsx("utrecht-link", "utrecht-link--html-a", {
          "utrecht-link--focus": focus,
          "utrecht-link--focus-visible": focusVisible,
        })}
      >
        example.com
      </a>
    </div>
    <div>
      <input
        type="text"
        className={clsx("utrecht-textbox", "utrecht-textbox--html-input", {
          "utrecht-textbox--focus": focus,
          "utrecht-textbox--focus-visible": focusVisible,
        })}
      />
    </div>
    <div>
      <input
        type="checkbox"
        className={clsx("utrecht-checkbox", "utrecht-textbox--html-input", {
          "utrecht-checkbox--focus": focus,
          "utrecht-checkbox--focus-visible": focusVisible,
        })}
      />
    </div>
    <div>
      <input
        type="radio"
        className={clsx("utrecht-radio-button", "utrecht-textbox--html-input", {
          "utrecht-radio-button--focus": focus,
          "utrecht-radio-button--focus-visible": focusVisible,
        })}
      />
    </div>
    <div>
      <select
        className={clsx("utrecht-select", "utrecht-select--html-select", {
          "utrecht-select--focus": focus,
          "utrecht-select--focus-visible": focusVisible,
        })}
      >
        <option>Example</option>
      </select>
    </div>
    <div>
      <textarea
        className={clsx("utrecht-textarea", "utrecht-textarea--html-textarea", {
          "utrecht-textarea--focus": focus,
          "utrecht-textarea--focus-visible": focusVisible,
        })}
      ></textarea>
    </div>
    <div>
      <button
        type="button"
        className={clsx("utrecht-button", {
          "utrecht-button--focus": focus,
          "utrecht-button--focus-visible": focusVisible,
        })}
      >
        Click me
      </button>
    </div>
  </div>
);

<Meta title="Common Patterns/Focus" />

<Markdown>{readme}</Markdown>

## Example

### Focusable

<Canvas>
  <Story
    name="Focus with BEM"
    parameters={{
      // These CSS components are already tested separately, ignore this story
      chromatic: { disableSnapshot: true },
    }}
    args={{
      modifiers: {
        focus: false,
      },
    }}
  >
    {FocusBEMExample.bind({})}
  </Story>
</Canvas>

### Focused

<Canvas>
  <Story
    name="Focus with BEM and :focus"
    parameters={{
      // actual `:focus` state cannot be tested using visual regression testing, ignore this story
      chromatic: { disableSnapshot: true },
    }}
    args={{
      modifiers: {
        focus: true,
      },
    }}
  >
    {FocusBEMExample.bind({})}
  </Story>
</Canvas>

### Focus visible

<Canvas>
  <Story
    name="Focus with BEM and :focus-visible"
    parameters={{
      // actual `:focus-visible` state cannot be tested using visual regression testing, ignore this story
      chromatic: { disableSnapshot: true },
    }}
    args={{
      modifiers: {
        "focus-visible": true,
      },
    }}
  >
    {FocusBEMExample.bind({})}
  </Story>
</Canvas>

### Focus and focus visible

<Canvas>
  <Story
    name="Focus with BEM and both :focus and :focus-visible"
    parameters={{
      // actual `:focus` and `:focus-visible` state cannot be tested using visual regression testing, ignore this story
      chromatic: { disableSnapshot: true },
    }}
    args={{
      modifiers: {
        focus: true,
        "focus-visible": true,
      },
    }}
  >
    {FocusBEMExample.bind({})}
  </Story>
</Canvas>

### Focusable HTML

<Canvas>
  <Story
    name="Focus with HTML"
    parameters={{
      // These HTML components are already tested separately, ignore this story
      chromatic: { disableSnapshot: true },
    }}
  >
    {FocusHTMLExample.bind({})}
  </Story>
</Canvas>

## Design Tokens

<ComponentTokensSection
  tokens={tokens}
  definition={tokensDefinition}
  component="utrecht-focus"
></ComponentTokensSection>
